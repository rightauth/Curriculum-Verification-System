<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous" />
    <title>ตรวจสอบหลักสูตร</title>
    <script type="application/javascript" src="https://unpkg.com/react@16.0.0/umd/react.production.min.js"></script>
    <script type="application/javascript" src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.production.min.js"></script>
    <script type="application/javascript" src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>  
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="menu">
        <a href="view_course.html"><li>หน้าหลัก</li></a>
        <a href="add_course.html"><li>เพิ่มหลักสูตร</li></a>
    </div>
    <div class="box">
        <div class="box-login">
            <div id="title">
                <div class="form" style="text-align: center;"><h3>รายการหลักสูตร</h3></div>
            </div>
            <!-- <div style="display:block; width:100%; text-align: right;">
                <a href="/download-report" target="_blank">
                    <input type='button' value='ดาวน์โหลดรายงาน'/>
                </a>
            </div> -->
            <div id="root"></div>
            <div id="body"></div>
        </div>
    </div>

    <script>
        function deleteCourse(id){

        }
    </script>

<script type="text/babel">
    const rootElement = document.getElementById('root');
    const bodyElement = document.getElementById('body');
    const titleElement = document.getElementById('title');
    fetch('http://localhost:3000/get-all-course',{
        method: 'GET',
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json',
        },
    }).then(function(data){
        data.json().then(function (json) {
            var result = "";
            
            for (var k in json){
                var o = json[k];

                result += `
                    <div>
                        <span>
                            <a href="view_course.html?id=${o.nameDepartment}-${o.startYear}&description=${o.description}">
                                ${o.nameDepartment} | ${o.startYear} | ${o.description}
                            </a>
                        </span>
                        <span>
                            [<a href="add_course.html?id=${o.nameDepartment}-${o.startYear}&description=${o.description}">Edit</a>][<a href="#" onClick="deleteCourse(${o.nameDepartment}-${o.startYear})">Delete</a>]
                        </span>
                    </div> `
            }

            rootElement.innerHTML = result;
        })
    })

</script>
    
</body>
</html>